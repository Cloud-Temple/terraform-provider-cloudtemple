---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "cloudtemple_compute_iaas_opensource_replication_policy Resource - terraform-provider-cloudtemple"
subcategory: "Compute"
description: |-
  To manage this resource you will need the following roles:
    - compute_iaas_opensource_management
    - compute_iaas_opensource_read
    - activity_read
---

# cloudtemple_compute_iaas_opensource_replication_policy (Resource)

To manage this resource you will need the following roles:
  - `compute_iaas_opensource_management`
  - `compute_iaas_opensource_read`
  - `activity_read`

## Example Usage

```terraform
# This example demonstrates how to create a replication policy for Open IaaS.
# A replication policy defines the interval at which VM replication occurs.

# First, get the storage repository where replicated VMs will be stored
data "cloudtemple_compute_iaas_opensource_storage_repository" "replication_target" {
  name               = "target_storage_repository_name"
  machine_manager_id = "availability_zone_id"
}

# Example 1: Create a replication policy that runs every 6 hours
resource "cloudtemple_compute_iaas_opensource_replication_policy" "policy_hourly" {
  name                  = "replication-policy-6h"
  storage_repository_id = data.cloudtemple_compute_iaas_opensource_storage_repository.replication_target.id

  interval {
    hours = 6
  }
}

# Example 2: Create a replication policy that runs every 30 minutes
resource "cloudtemple_compute_iaas_opensource_replication_policy" "policy_minutes" {
  name                  = "replication-policy-30m"
  storage_repository_id = data.cloudtemple_compute_iaas_opensource_storage_repository.replication_target.id

  interval {
    minutes = 30
  }
}

# You can then associate this policy with a virtual machine using the replication_policy_id attribute
resource "cloudtemple_compute_iaas_opensource_virtual_machine" "vm_with_replication" {
  name        = "vm-with-replication"
  template_id = "template_id"
  cpu         = 2
  memory      = 4 * 1024 * 1024 * 1024
  power_state = "on"

  # Associate the replication policy
  replication_policy_id = cloudtemple_compute_iaas_opensource_replication_policy.policy_hourly.id

  # ... other VM configuration ...
}

# Output the replication policy details
output "replication_policy" {
  value = {
    id                 = cloudtemple_compute_iaas_opensource_replication_policy.policy_hourly.id
    name               = cloudtemple_compute_iaas_opensource_replication_policy.policy_hourly.name
    pool_id            = cloudtemple_compute_iaas_opensource_replication_policy.policy_hourly.pool_id
    machine_manager_id = cloudtemple_compute_iaas_opensource_replication_policy.policy_hourly.machine_manager_id
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `interval` (Block List, Min: 1, Max: 1) The interval at which the replication policy runs. (see [below for nested schema](#nestedblock--interval))
- `name` (String) The name of the replication policy.
- `storage_repository_id` (String) The ID of the storage repository where the replication policy is applied.

### Read-Only

- `id` (String) The ID of the replication policy.
- `last_run` (List of Object) The timestamp of the last run of the replication policy. (see [below for nested schema](#nestedatt--last_run))
- `machine_manager_id` (String) The ID of the machine manager associated with the replication policy.
- `pool_id` (String) The ID of the pool associated with the replication policy.

<a id="nestedblock--interval"></a>
### Nested Schema for `interval`

Optional:

- `hours` (Number) The interval in hours.
- `minutes` (Number) The interval in minutes.


<a id="nestedatt--last_run"></a>
### Nested Schema for `last_run`

Read-Only:

- `end` (Number)
- `start` (Number)
- `status` (String)


